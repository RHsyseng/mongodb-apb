FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="1.0.0"
LABEL "com.redhat.apb.spec"=\
"LS0tCnZlcnNpb246IDEuMApuYW1lOiBtb25nb2RiLWFwYgpkZXNjcmlwdGlvbjogRGVwbG95IE1v\
bmdvREIgYXBwIG9uIHlvdXIgT3BlbnNoaWZ0IFByb2plY3QKYmluZGFibGU6IFRydWUKYXN5bmM6\
IG9wdGlvbmFsCm1ldGFkYXRhOgogIGRvY3VtZW50YXRpb25Vcmw6IGh0dHBzOi8vYWNjZXNzLnJl\
ZGhhdC5jb20KICBpbWFnZVVybDogaHR0cDovL25pZ2h0ZGV2ZWxvcGVyLm5ldC93cC1jb250ZW50\
L3VwbG9hZHMvMjAxNC8xMi9tb25nb19kYi5wbmcKICBkaXNwbGF5TmFtZTogTW9uZ29EQiAoQVBC\
KQogIHByb3ZpZGVyRGlzcGxheU5hbWU6ICJSZWQgSGF0LCBJbmMuIgogIGxvbmdEZXNjcmlwdGlv\
bjogTW9uZ29EQiBpcyBhIGRvY3VtZW50IGRhdGFiYXNlIHdpdGggdGhlIHNjYWxhYmlsaXR5IGFu\
ZCBmbGV4aWJpbGl0eSB0aGF0IHlvdSB3YW50IHdpdGggdGhlIHF1ZXJ5aW5nIGFuZCBpbmRleGlu\
ZyB0aGF0IHlvdSBuZWVkLiBUaGlzIEFQQiB3aWxsIGNvdmVyIGFuIHN0YW5kYWxvbmUgYW5kIEhB\
IGRlcGxveW1lbnQuCiAgc2VydmljZU5hbWU6IG1vbmdvZGIKcGxhbnM6CiAgLSBuYW1lOiBlcGhl\
bWVyYWwKICAgIGRlc2NyaXB0aW9uOiBUaGlzIGRlZmF1bHQgcGxhbiBkZXBsb3lzIG1vbmdvZGIt\
YXBiCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6IEVwaGVt\
ZXJhbAogICAgICBsb25nRGVzY3JpcHRpb246IFRoaXMgcGxhbiB3aWxsIGRlcGxveSBhIE1vbmdv\
REIgc3RhbmRhbG9uZSBvciBIQSBpbnN0YW5jZS9zIHVzaW5nIGVwaGVtZXJhbCBzdG9yYWdlCiAg\
ICAgIGNvc3Q6IOKCrDAuMDAKICAgIHBhcmFtZXRlcnM6CiAgICAgICAgIyBDb250YWluZXIgU3Bl\
Y3MgCiAgICAgIC0gbmFtZTogTU9OR09EQl9WRVJTSU9OCiAgICAgICAgZGVmYXVsdDogMy40CiAg\
ICAgICAgdGl0bGU6IFZlcnNpb24gb2YgTW9uZ29EQiBpbWFnZSB0byBiZSB1c2VkICgyLjYsIDMu\
MiBvciAzLjQpLgogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBlbnVtOiBbJzIuNicsICczLjIn\
LCAnMy40J10KICAgICAgICBkaXNwbGF5X3R5cGU6IHNlbGVjdAogICAgICAtIG5hbWU6IE1PTkdP\
REJfSU1BR0VfVEFHCiAgICAgICAgZGVmYXVsdDogJ2xhdGVzdCcKICAgICAgICB0eXBlOiBzdHJp\
bmcKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfLi1dKiQiCiAgICAgICAgcmVxdWlyZWQ6\
IEZhbHNlCgogICAgICAgICMgTW9uZ29EQiBDb25mCiAgICAgIC0gbmFtZTogTU9OR09EQl9VU0VS\
CiAgICAgICAgZGVmYXVsdDogJ3VzZXJuYW1lJwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAg\
IHBhdHRlcm46ICJeW2EtekEtWjAtOV8uLV0qJCIKICAgICAgICByZXF1aXJlZDogRmFsc2UKICAg\
ICAgICB0aXRsZTogVXNlcm5hbWUgZm9yIE1vbmdvREIgdXNlciB0aGF0IHdpbGwgYmUgdXNlZCBm\
b3IgYWNjZXNzaW5nIHRoZSBkYXRhYmFzZS4KICAgICAgLSBuYW1lOiBNT05HT0RCX1BBU1NXT1JE\
CiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiAncGFzc3dvcmQnCiAgICAg\
ICAgdHlwZTogc3RyaW5nCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05Xy4tXSokIgogICAg\
ICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgICB0aXRsZTogUGFzc3dvcmQgZm9yIHRo\
ZSBNb25nb0RCIGNvbm5lY3Rpb24gdXNlci4KICAgICAgLSBuYW1lOiBNT05HT0RCX0RBVEFCQVNF\
CiAgICAgICAgZGVmYXVsdDogJ3NhbXBsZWRiJwogICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAt\
OV8tXSokIgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBOYW1lIG9mIHRoZSBN\
b25nb0RCIGRhdGFiYXNlIGFjY2Vzc2VkLgogICAgICAtIG5hbWU6IE1PTkdPREJfQURNSU5fUEFT\
U1dPUkQKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6ICdhZG1pbicKICAg\
ICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfLi1dKiQiCiAgICAgICAgdHlwZTogc3RyaW5nCiAg\
ICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIHRpdGxlOiBQYXNzd29yZCBmb3Ig\
dGhlIGRhdGFiYXNlIGFkbWluIHVzZXIuCgogICAgICAgICMjIEVudmlyb25tZW50IHNpemluZwog\
ICAgICAtIG5hbWU6IE1PTkdPREJfTUVNT1JZX0xJTUlUCiAgICAgICAgZGVmYXVsdDogNTEyTWkK\
ICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogTWF4aW11bSBhbW91bnQgb2YgbWVt\
b3J5IHRoZSBjb250YWluZXIgY2FuIHVzZS4gZS5nIDUxMk1pIDFHaQoKICAtIG5hbWU6IHBlcnNp\
c3RlbnQKICAgIGRlc2NyaXB0aW9uOiBQZXJzaXN0ZW50IHN0b3JhZ2UgcGxhbiB0byBkZXBsb3kg\
bW9uZ29kYi1hcGIKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFt\
ZTogUGVyc2lzdGVudAogICAgICBsb25nRGVzY3JpcHRpb246IFRoaXMgcGxhbiB3aWxsIGRlcGxv\
eSBhIE1vbmdvREIgc3RhbmRhbG9uZSBvciBIQSBpbnN0YW5jZS9zIHVzaW5nIHBlcnNpc3RlbnQg\
c3RvcmFnZQogICAgICBjb3N0OiDigqwwLjAwCiAgICBwYXJhbWV0ZXJzOgogICAgICAgICMgQ29u\
dGFpbmVyIFNwZWNzIAogICAgICAtIG5hbWU6IE1PTkdPREJfVkVSU0lPTgogICAgICAgIGRlZmF1\
bHQ6IDMuNAogICAgICAgIHRpdGxlOiBWZXJzaW9uIG9mIE1vbmdvREIgaW1hZ2UgdG8gYmUgdXNl\
ZCAoMi42LCAzLjIgb3IgMy40KS4KICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZW51bTogWycy\
LjYnLCAnMy4yJywgJzMuNCddCiAgICAgICAgZGlzcGxheV90eXBlOiBzZWxlY3QKICAgICAgLSBu\
YW1lOiBNT05HT0RCX0lNQUdFX1RBRwogICAgICAgIGRlZmF1bHQ6ICdsYXRlc3QnCiAgICAgICAg\
dGl0bGU6IFRhZyBvZiBjb250YWluZXIgaW1hZ2UgdG8gYmUgdXNlZC4KICAgICAgICB0eXBlOiBz\
dHJpbmcKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfLi1dKiQiCiAgICAgICAgcmVxdWly\
ZWQ6IEZhbHNlCgogICAgICAgICMgTW9uZ29EQiBDb25mCiAgICAgIC0gbmFtZTogTU9OR09EQl9V\
U0VSCiAgICAgICAgZGVmYXVsdDogJ3VzZXJuYW1lJwogICAgICAgIHR5cGU6IHN0cmluZwogICAg\
ICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV8uLV0qJCIKICAgICAgICByZXF1aXJlZDogRmFsc2UK\
ICAgICAgICB0aXRsZTogVXNlcm5hbWUgZm9yIE1vbmdvREIgdXNlciB0aGF0IHdpbGwgYmUgdXNl\
ZCBmb3IgYWNjZXNzaW5nIHRoZSBkYXRhYmFzZS4KICAgICAgLSBuYW1lOiBNT05HT0RCX1BBU1NX\
T1JECiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiAncGFzc3dvcmQnCiAg\
ICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05Xy4tXSokIgog\
ICAgICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgICB0aXRsZTogUGFzc3dvcmQgZm9y\
IHRoZSBNb25nb0RCIGNvbm5lY3Rpb24gdXNlci4KICAgICAgLSBuYW1lOiBNT05HT0RCX0RBVEFC\
QVNFCiAgICAgICAgZGVmYXVsdDogJ3NhbXBsZWRiJwogICAgICAgIHBhdHRlcm46ICJeW2EtekEt\
WjAtOV8tXSokIgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBOYW1lIG9mIHRo\
ZSBNb25nb0RCIGRhdGFiYXNlIGFjY2Vzc2VkLgogICAgICAtIG5hbWU6IE1PTkdPREJfQURNSU5f\
UEFTU1dPUkQKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6ICdhZG1pbicK\
ICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfLi1dKiQiCiAgICAgICAgdHlwZTogc3RyaW5n\
CiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIHRpdGxlOiBQYXNzd29yZCBm\
b3IgdGhlIGRhdGFiYXNlIGFkbWluIHVzZXIuCgogICAgICAgICMjIEVudmlyb25tZW50IHNpemlu\
ZwogICAgICAtIG5hbWU6IE1PTkdPREJfREFUQV9TVE9SQUdFX1NJWkUKICAgICAgICBkZWZhdWx0\
OiAxCiAgICAgICAgdHlwZTogbnVtYmVyCiAgICAgICAgdGl0bGU6IFZvbHVtZSBzcGFjZSBhdmFp\
bGFibGUgZm9yIGRhdGEgaW5HaS4KICAgICAgLSBuYW1lOiBNT05HT0RCX01FTU9SWV9MSU1JVAog\
ICAgICAgIGRlZmF1bHQ6IDUxMk1pCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6\
IE1heGltdW0gYW1vdW50IG9mIG1lbW9yeSB0aGUgY29udGFpbmVyIGNhbiB1c2UuIGUuZyA1MTJN\
aSAxR2kKCiAgLSBuYW1lOiBIQQogICAgZGVzY3JpcHRpb246IEhBIE1vbmdvREIgZGVwbG95bWVu\
dCB3aXRoIFBlcnNpc3RlbnQgc3RvcmFnZQogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6CiAg\
ICAgIGRpc3BsYXlOYW1lOiBNb25nb0RCIEhBCiAgICAgIGxvbmdEZXNjcmlwdGlvbjogVGhpcyBw\
bGFuIHdpbGwgZGVwbG95IGEgTW9uZ29EQiBIQSBpbnN0YW5jZSB1c2luZyBwZXJzaXN0ZW50IHN0\
b3JhZ2UKICAgICAgY29zdDog4oKsMC4wMAogICAgcGFyYW1ldGVyczoKICAgICAgICAjIENvbnRh\
aW5lciBTcGVjcyAKICAgICAgLSBuYW1lOiBNT05HT0RCX1ZFUlNJT04KICAgICAgICBkZWZhdWx0\
OiAzLjQKICAgICAgICB0aXRsZTogVmVyc2lvbiBvZiBNb25nb0RCIGltYWdlIHRvIGJlIHVzZWQg\
KDIuNiwgMy4yIG9yIDMuNCkuCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGVudW06IFsnMi42\
JywgJzMuMicsICczLjQnXQogICAgICAgIGRpc3BsYXlfdHlwZTogc2VsZWN0CiAgICAgIC0gbmFt\
ZTogTU9OR09EQl9JTUFHRV9UQUcKICAgICAgICBkZWZhdWx0OiAnbGF0ZXN0JwogICAgICAgIHR5\
cGU6IHN0cmluZwogICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV8uLV0qJCIKICAgICAgICBy\
ZXF1aXJlZDogRmFsc2UKCiAgICAgICAgIyBNb25nb0RCIENvbmYKICAgICAgLSBuYW1lOiBNT05H\
T0RCX1VTRVIKICAgICAgICBkZWZhdWx0OiAndXNlcm5hbWUnCiAgICAgICAgdHlwZTogc3RyaW5n\
CiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05Xy4tXSokIgogICAgICAgIHJlcXVpcmVkOiBG\
YWxzZQogICAgICAgIHRpdGxlOiBVc2VybmFtZSBmb3IgTW9uZ29EQiB1c2VyIHRoYXQgd2lsbCBi\
ZSB1c2VkIGZvciBhY2Nlc3NpbmcgdGhlIGRhdGFiYXNlLgogICAgICAtIG5hbWU6IE1PTkdPREJf\
UEFTU1dPUkQKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6ICdwYXNzd29y\
ZCcKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfLi1d\
KiQiCiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIHRpdGxlOiBQYXNzd29y\
ZCBmb3IgdGhlIE1vbmdvREIgY29ubmVjdGlvbiB1c2VyLgogICAgICAtIG5hbWU6IE1PTkdPREJf\
REFUQUJBU0UKICAgICAgICBkZWZhdWx0OiAnc2FtcGxlZGInCiAgICAgICAgcGF0dGVybjogIl5b\
YS16QS1aMC05Xy1dKiQiCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IE5hbWUg\
b2YgdGhlIE1vbmdvREIgZGF0YWJhc2UgYWNjZXNzZWQuCiAgICAgIC0gbmFtZTogTU9OR09EQl9B\
RE1JTl9QQVNTV09SRAogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogJ2Fk\
bWluJwogICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV8uLV0qJCIKICAgICAgICB0eXBlOiBz\
dHJpbmcKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAgdGl0bGU6IFBhc3N3\
b3JkIGZvciB0aGUgZGF0YWJhc2UgYWRtaW4gdXNlci4KCiAgICAgICAgIyMgRW52aXJvbm1lbnQg\
c2l6aW5nCiAgICAgIC0gbmFtZTogTU9OR09EQl9EQVRBX1NUT1JBR0VfU0laRQogICAgICAgIGRl\
ZmF1bHQ6IDEKICAgICAgICB0eXBlOiBudW1iZXIKICAgICAgICB0aXRsZTogVm9sdW1lIHNwYWNl\
IGF2YWlsYWJsZSBmb3IgZGF0YSBpbiBHaS4KICAgICAgLSBuYW1lOiBNT05HT0RCX01FTU9SWV9M\
SU1JVAogICAgICAgIGRlZmF1bHQ6IDUxMk1pCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAg\
dGl0bGU6IE1heGltdW0gYW1vdW50IG9mIG1lbW9yeSB0aGUgY29udGFpbmVyIGNhbiB1c2UuIGUu\
ZyA1MTJNaSAxR2kKCiAgICAgICAgIyMgSEEgRGVwbG95bWVudAogICAgICAtIG5hbWU6IE1PTkdP\
REJfS0VZRklMRV9WQUxVRQogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDog\
J3h4eHh4eHh4eHh4eHh4eHh4JwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRpc3BsYXlf\
dHlwZTogdGV4dGFyZWEKICAgICAgICB0aXRsZTogS2V5ZmlsZSB0byBlbmNvZGUgdGhlIGNvbW11\
bmljYXRpb24gYmV0d2VlbiBSZXBsaWNhIHNldCBtZW1iZXJzLgogICAgICAtIG5hbWU6IE1PTkdP\
REJfUkVQTElDQV9OQU1FCiAgICAgICAgcmVxdWlyZWQ6IEZhbHNlCiAgICAgICAgZGVmYXVsdDog\
J3JzMCcKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogUmVwbGljYSBTZXQgbmFt\
ZSBmb3IgTW9uZ29EQiBDbHVzdGVyLgogICAgICAtIG5hbWU6IE1PTkdPREJfU0VSVklDRV9OQU1F\
CiAgICAgICAgcmVxdWlyZWQ6IEZhbHNlCiAgICAgICAgZGVmYXVsdDogJ21vbmdvZGInCiAgICAg\
ICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IFNlcnZpY2UgbmFtZSBmb3IgTW9uZ29EQidz\
IFJlcGxpY2EgU2V0LgoK"

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
